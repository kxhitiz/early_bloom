<div class="mb-6">
  <%= link_to "&larr; Back to Posts".html_safe, admin_posts_path, class: "text-emerald-600 hover:text-emerald-700" %>
</div>

<div class="bg-white rounded-lg shadow-sm border border-stone-200 p-6 mb-6">
  <div class="flex justify-between items-start mb-4">
    <div>
      <h1 class="text-2xl font-bold text-stone-800 mb-2">
        <%= @post.title.presence || "Untitled Post" %>
      </h1>
      <div class="flex items-center gap-4 text-sm text-stone-500">
        <span>By <%= link_to @post.user.name, admin_user_path(@post.user), class: "text-emerald-600 hover:text-emerald-700" %></span>
        <span><%= @post.child_profile.name %> (<%= @post.child_profile.age_in_months %> months)</span>
        <span><%= @post.created_at.strftime("%B %d, %Y at %I:%M %p") %></span>
      </div>
    </div>
    <div class="flex items-center gap-2">
      <span class="text-xs px-2 py-1 bg-emerald-50 text-emerald-700 rounded"><%= @post.post_type %></span>
      <% if @post.category %>
        <span class="text-xs px-2 py-1 bg-stone-100 text-stone-600 rounded"><%= @post.category.name %></span>
      <% end %>
    </div>
  </div>

  <div class="prose prose-stone max-w-none mb-6">
    <%= simple_format(@post.body) %>
  </div>

  <div class="flex items-center gap-6 text-sm text-stone-500 pt-4 border-t border-stone-200">
    <span><%= @post.comments.count %> comments</span>
    <span><%= @post.reactions.count %> reactions</span>
    <%= link_to "View on site", post_path(@post), target: "_blank", class: "text-emerald-600 hover:text-emerald-700" %>
    <%= button_to "Delete Post", admin_post_path(@post), method: :delete, data: { turbo_confirm: "Are you sure you want to delete this post?" }, class: "text-red-600 hover:text-red-700" %>
  </div>
</div>

<% if @comments.any? %>
  <div class="bg-white rounded-lg shadow-sm border border-stone-200">
    <div class="p-4 border-b border-stone-200">
      <h2 class="font-semibold text-stone-800">Comments (<%= @comments.count %>)</h2>
    </div>
    <div class="divide-y divide-stone-100">
      <% @comments.each do |comment| %>
        <div class="p-4">
          <div class="flex justify-between items-start">
            <div class="flex-1">
              <p class="text-stone-700 mb-2"><%= simple_format(comment.body) %></p>
              <p class="text-xs text-stone-500">
                by <%= link_to comment.user.name, admin_user_path(comment.user), class: "text-emerald-600 hover:text-emerald-700" %>
                &middot; <%= time_ago_in_words(comment.created_at) %> ago
              </p>
            </div>
            <%= button_to "Delete", admin_comment_path(comment), method: :delete, data: { turbo_confirm: "Are you sure?" }, class: "text-sm text-red-600 hover:text-red-700 ml-4" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
