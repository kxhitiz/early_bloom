<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Early Bloom - A Safe Space for New Parents" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%= favicon_link_tag "early_bloom_icon.svg", type: "image/svg+xml" %>
    <%= favicon_link_tag "early_bloom_icon.svg", rel: "apple-touch-icon", type: "image/svg+xml" %>

    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", type: "module" %>
  </head>

  <body class="bg-stone-50 text-stone-800 min-h-screen">
    <header class="bg-white border-b border-stone-200 shadow-sm">
      <div class="max-w-5xl mx-auto px-4 py-3 flex justify-between items-center">
        <%= link_to root_path, class: "flex items-center gap-3 hover:opacity-90 transition" do %>
          <svg width="280" height="80" viewBox="0 0 280 80" xmlns="http://www.w3.org/2000/svg" class="h-10 w-auto">
            <text x="140" y="45" font-family="Pacifico, cursive" font-size="42" fill="#059669" text-anchor="middle">Early Bloom</text>
            <line x1="60" y1="50" x2="220" y2="50" stroke="#fda4af" stroke-width="1" opacity="0.3"></line>
            <text x="140" y="68" font-family="system-ui, sans-serif" font-size="10" fill="#78716c" text-anchor="middle" letter-spacing="1.5">A SAFE SPACE FOR NEW PARENTS</text>
          </svg>
        <% end %>
        
        <nav class="flex items-center gap-4">
          <% if logged_in? %>
            <%= link_to "Feed", feed_path, class: "text-stone-600 hover:text-emerald-700" %>
            <%= link_to "New Post", new_post_path, class: "text-stone-600 hover:text-emerald-700" %>
            <%= link_to user_path(current_user), class: "flex items-center gap-2 text-stone-600 hover:text-emerald-700" do %>
              <div class="w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center text-emerald-700 font-semibold text-sm">
                <%= current_user.name.first.upcase %>
              </div>
              <span class="text-sm"><%= current_user.name %></span>
            <% end %>
            <%= button_to "Logout", logout_path, method: :delete, class: "text-sm px-3 py-1 bg-stone-200 hover:bg-stone-300 rounded" %>
          <% else %>
            <%= link_to "Login", login_path, class: "text-stone-600 hover:text-emerald-700" %>
            <%= link_to "Sign Up", signup_path, class: "px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg" %>
          <% end %>
        </nav>
      </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 py-8">
      <% if flash[:notice] %>
        <div class="mb-6 p-4 bg-emerald-50 border border-emerald-200 text-emerald-800 rounded-lg">
          <%= flash[:notice] %>
        </div>
      <% end %>
      
      <% if flash[:alert] %>
        <div class="mb-6 p-4 bg-amber-50 border border-amber-200 text-amber-800 rounded-lg">
          <%= flash[:alert] %>
        </div>
      <% end %>

      <%= yield %>
    </main>

    <footer class="bg-white border-t border-stone-200 mt-16 py-8">
      <div class="max-w-5xl mx-auto px-4 text-center">
        <div class="flex justify-center mb-3">
          <%= image_tag "early_bloom_icon.svg", alt: "Early Bloom", class: "h-8 opacity-60" %>
        </div>
        <p class="text-stone-500 text-sm">Early Bloom - A calm, supportive space for new parents</p>
        <p class="mt-2 text-stone-400 text-xs">Remember: You're not alone, and you're doing great.</p>
      </div>
    </footer>
  </body>
</html>
